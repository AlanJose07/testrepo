RightNow.namespace('Custom.Widgets.customercoachchange.SelectionInputLanguage');
Custom.Widgets.customercoachchange.SelectionInputLanguage = RightNow.Widgets.SelectionInput.extend({ 
    /**
     * Place all properties that intend to
     * override those of the same name in
     * the parent inside `overrides`.
     */
    overrides: {
        /**
         * Overrides RightNow.Widgets.SelectionInput#constructor.
         */
        constructor: function(data, instanceID) {
            // Call into parent's constructor
    this.parent();
	this.instanceID = instanceID;
	this.data = data;
	var fieldName = data.js.name;
	this._inputField = document.getElementById("rn_" + this.instanceID + "_" + this.data.js.name);
	window.life=0;
	if(fieldName == "Incident.CustomFields.c.ccc_language") //Language Dropdown
	{
		this._inputField = document.getElementById("rn_" + this.instanceID + "_" + this.data.js.name); 
		this.input.on("change", this.language_Changed, this);
		//RightNow.Event.subscribe("evt_clear_on_back_button", this.clearOnBackButton, this);
	}
	
	if(fieldName == "Incident.CustomFields.c.member_type"||fieldName == "Incident.CustomFields.c.member_type_fre"||fieldName == "Incident.CustomFields.c.member_type_spa") //Member Type English oe French or Spanish
	{
		
		this.data.attrs.required=false;
		this._inputField = document.getElementById("rn_" + this.instanceID + "_" + this.data.js.name); 
		this.input.on("change", this.memberType_Changed, this);
		RightNow.Event.subscribe("evt_languagechanged", this._set_required_attribute, this);
	
	}
	
	if(fieldName == "Incident.CustomFields.c.ccc_transfer_vc_eng"||fieldName == "Incident.CustomFields.c.ccc_transfer_vc_fre"||fieldName == "Incident.CustomFields.c.ccc_transfer_vc_spa") //Transfer Volume and Commission English or French or Spanish
	{
		this._inputField = document.getElementById("rn_" + this.instanceID + "_" + this.data.js.name); 
		this.input.on("change", this.vc_Changed, this);
		RightNow.Event.subscribe("evt_languagechanged", this._resetAttrs, this);
		RightNow.Event.subscribe("evt_memberType_Changed",this._resetAttrs, this);
	
	}
	
        }
     
    },

     language_Changed: function() 
	{
		this.Value = this._inputField.options[this._inputField.selectedIndex].text;
		 //**Code for getting id of the selected text of dropdown**//
  		var length = this.input._node.length;
		alert("enter lang change");
		document.getElementById("rn_ErrorLocation").innerHTML="";//reset error location
		
        this.Y.one("#rn_ErrorLocation").addClass("rn_Hidden");//.set("innerHTML", "");
		alert("reset er");
		  //Reset form errors
 		for(var i=0;i<length;i++)
 		{
  			var text=this.input._node[i].label;
  				if(this.Value == text)
  				{
 					 var id = this.input._node[i].value; 
  				}
		 }
 			var eo = new RightNow.Event.EventObject(this, {data:  id});
		    RightNow.Event.fire("evt_languagechanged", eo);
			if(id==744)//language equals english
				{
					var displayNone = ["Language_Header_French","Language_Header_Spanish","coach_or_customer_french",										"coach_or_customer_spanish","Coach_Header_French","Coach_Header_Spanish","coach_french","coach_spanish","customer_french","customer_spanish"];
					var displayBlock =["Language_Header_English", "coach_or_customer_english","main_heading_english","ssn"];
					this._displayNone(displayNone);
					this._displayBlock(displayBlock);
					
				}
			else if(id==745)//language equals french
				{
					var displayNone = ["main_heading_english","Language_Header_English","coach_or_customer_english","coach_english","coach_spanish","customer_english","customer_spanish","coach_or_customer_spanish","Coach_Header_English","Coach_Header_Spanish","Language_Header_Spanish","ssn"];
					var displayBlock =["Language_Header_French","coach_or_customer_french"];
					this._displayNone(displayNone);
					this._displayBlock(displayBlock);
				}
			else if(id==746)//language equals spanish
				{
					var displayNone = ["main_heading_english","Language_Header_English","coach_or_customer_english","coach_english","coach_french","customer_english","customer_french","coach_or_customer_spanish","Language_Header_French","coach_or_customer_french","Coach_Header_English","Coach_Header_French"];
					var displayBlock =["Language_Header_Spanish","coach_or_customer_spanish","ssn"];
					this._displayNone(displayNone);
					this._displayBlock(displayBlock);
				}	
			else
				{
					
					var displayNone = ["Language_Header_Spanish","Language_Header_English","coach_or_customer_english","coach_english","coach_french","coach_spanish","customer_english","customer_french","customer_spanish","coach_or_customer_spanish","Language_Header_French","coach_or_customer_french","Coach_Header_English","Coach_Header_Spanish","Coach_Header_French","ssn"];
					var displayBlock =["main_heading_english"];
					this._displayNone(displayNone);
					this._displayBlock(displayBlock);
				}
    },
	memberType_Changed: function() {
		this.Value = this._inputField.options[this._inputField.selectedIndex].text;
		 //**Code for getting id of the selected text of dropdown**//
  		var length = this.input._node.length;
		//alert("enter memb change");
		//document.getElementById("rn_ErrorLocation").innerHTML="";//reset error location
		
       // this.Y.one("#rn_ErrorLocation").addClass("rn_Hidden");//.set("innerHTML", "");
		//alert("reset esssssr");

 		for(var i=0;i<length;i++)
 		{
  			var text=this.input._node[i].label;
  				if(this.Value == text)
  				{
 					 var id = this.input._node[i].value; 
   
  				}
		 }
		 		var eo = new RightNow.Event.EventObject(this, {data:  id});
		   		RightNow.Event.fire("evt_memberType_Changed", eo);
 			
			if(id==50)//Member Type = Coach English
				{	var displayNone = ["coach_spanish","coach_french","Coach_Header_English","customer_english","customer_french","customer_spanish"];
					var displayBlock =["coach_english", "Coach_Header_English"];
					this._displayNone(displayNone);
					this._displayBlock(displayBlock);
					window.member="coach_english";
	
				}
			else if(id==49)//Member Type = Customer English
				{
					var displayNone = ["coach_english","coach_spanish","coach_french","Coach_Header_English","customer_french","customer_spanish"];
					var displayBlock =["customer_english"];
					this._displayNone(displayNone);
					this._displayBlock(displayBlock);
					window.member="customer_english";
				
				}	
			else if(id==755)//Member Type = Coach French
				{
					var displayNone = ["coach_english","coach_spanish","Coach_Header_English","customer_english","customer_french","customer_spanish"];
					var displayBlock =["coach_french"];
					this._displayNone(displayNone);
					this._displayBlock(displayBlock);
					window.member="coach_french";
				
				}	
				
			else if(id==756)//Member Type = Customer French
				{
					var displayNone = ["coach_english","coach_spanish","coach_french","Coach_Header_English","customer_spanish","customer_english"];
					var displayBlock =["customer_french"];
					this._displayNone(displayNone);
					this._displayBlock(displayBlock);
					window.member="customer_french";
				
				}	
			else if(id==757)//Member Type = Coach Spanish
				{
					var displayNone = ["coach_english","coach_french","Coach_Header_English","customer_spanish","customer_english","customer_french"];
					var displayBlock =["coach_spanish"];
					this._displayNone(displayNone);
					this._displayBlock(displayBlock);
					window.member="coach_spanish";
				
				}	
			else if(id==758)//Member Type = Customer Spanish
				{
					var displayNone = ["coach_english","coach_french","coach_spanish","Coach_Header_English","customer_english","customer_french"];
					var displayBlock =["customer_spanish"];
					this._displayNone(displayNone);
					this._displayBlock(displayBlock);
					window.member="customer_spanish";
				
				}	
				else
				{
					var displayNone = ["customer_english","coach_english","coach_french","coach_spanish","customer_french","customer_spanish"];
					this._displayNone(displayNone);
					window.member="null";
					
				}
								
    },
	vc_Changed: function() {//Transfer Volume and Commission of customer order
		this.Value = this._inputField.options[this._inputField.selectedIndex].text;
		 //**Code for getting id of the selected text of dropdown**//
  		var length = this.input._node.length;

 		for(var i=0;i<length;i++)
 		{
  			var text=this.input._node[i].label;
  				if(this.Value == text)
  				{
 					 var id = this.input._node[i].value; 
   
  				}
		 }
 			/*var eo = new RightNow.Event.EventObject(this, {data:  id});
		    RightNow.Event.fire("evt_vc_Changed", eo);*/
			if(id==749)//VC Eng Yes
				{//alert("Eng Yes ");
					if(window.member==="coach_english")
					{//alert("coach_english");
						var displayBlock =["transfer_vc_coach_eng_yes"];
						var displayNone = ["transfer_vc_coach_fre_yes","transfer_vc_coach_spa_yes","transfer_vc_customer_eng_yes","transfer_vc_customer_fre_yes","transfer_vc_customer_spa_yes"];
						this._displayNone(displayNone);
						this._displayBlock(displayBlock);
					}
			
					else if(window.member==="customer_english")
					{//alert("customer_english");
						var displayBlock =["transfer_vc_customer_eng_yes"];
						var displayNone = ["transfer_vc_coach_fre_yes","transfer_vc_coach_spa_yes","transfer_vc_coach_eng_yes","transfer_vc_customer_fre_yes","transfer_vc_customer_spa_yes"];
						this._displayNone(displayNone);
						this._displayBlock(displayBlock);
					}
					else 
					{
						alert("null");
					}
									
				}
			else if(id==750)//VC  Eng No
				{
					var displayNone = ["transfer_vc_coach_eng_yes","transfer_vc_coach_fre_yes","transfer_vc_coach_spa_yes","transfer_vc_customer_eng_yes","transfer_vc_customer_fre_yes","transfer_vc_customer_spa_yes"];
					this._displayNone(displayNone);
				}
			else if(id==751)//VC Fre Yes
				{	
					if(window.member==="coach_french")//
					{
						var displayBlock =["transfer_vc_coach_fre_yes"];
						var displayNone = ["transfer_vc_coach_eng_yes","transfer_vc_coach_spa_yes","transfer_vc_customer_eng_yes","transfer_vc_customer_fre_yes","transfer_vc_customer_spa_yes"];
						this._displayNone(displayNone);
						this._displayBlock(displayBlock);
					}
			
					else if(window.member==="customer_french")
					{
						var displayBlock =["transfer_vc_customer_fre_yes"];
						var displayNone = ["transfer_vc_coach_fre_yes","transfer_vc_coach_spa_yes","transfer_vc_coach_eng_yes","transfer_vc_customer_eng_yes","transfer_vc_customer_spa_yes"];
						this._displayNone(displayNone);
						this._displayBlock(displayBlock);
					}
				}
			else if(id==752)//VC Fre No
				{
					var displayNone = ["transfer_vc_coach_eng_yes","transfer_vc_coach_fre_yes","transfer_vc_coach_spa_yes","transfer_vc_customer_eng_yes","transfer_vc_customer_fre_yes","transfer_vc_customer_spa_yes"];
					this._displayNone(displayNone);
				}
			else if(id==753)//VC Spa Yes
				{	
					if(window.member==="coach_spanish")//
					{
						var displayBlock =["transfer_vc_coach_spa_yes"];
						var displayNone = ["transfer_vc_coach_eng_yes","transfer_vc_coach_fre_yes","transfer_vc_customer_eng_yes","transfer_vc_customer_fre_yes","transfer_vc_customer_spa_yes"];
						this._displayNone(displayNone);
						this._displayBlock(displayBlock);
					}
			
					else if(window.member==="customer_spanish")
					{
						var displayBlock =["transfer_vc_customer_spa_yes"];
						var displayNone = ["transfer_vc_coach_fre_yes","transfer_vc_coach_spa_yes","transfer_vc_coach_eng_yes","transfer_vc_customer_eng_yes","transfer_vc_customer_fre_yes"];
						this._displayNone(displayNone);
						this._displayBlock(displayBlock);
					}
				}
			else if(id==754)//VC Spa No
				{
					var displayNone = ["transfer_vc_coach_eng_yes","transfer_vc_coach_fre_yes","transfer_vc_coach_spa_yes","transfer_vc_customer_eng_yes","transfer_vc_customer_fre_yes","transfer_vc_customer_spa_yes"];
					this._displayNone(displayNone);
				}
							
			else 
				{
					var displayNone = ["transfer_vc_coach_eng_yes","transfer_vc_coach_fre_yes","transfer_vc_coach_spa_yes","transfer_vc_customer_eng_yes","transfer_vc_customer_fre_yes","transfer_vc_customer_spa_yes"];
					this._displayNone(displayNone);
				}
				
				
				
				
    },
	_displayNone: function(displayNone)
	{
		/*console.log(displayNone);*/
		for (var i=0;i<displayNone.length;i++)
		{
			if(document.getElementById(displayNone[i]))
			{	
				document.getElementById(displayNone[i]).style.display = "none";
			}
		}	
	},
	_set_required_attribute: function(type, args)
	{
		var lang_id = args[0].data;
		
		if(this.data.js.name == "Incident.CustomFields.c.member_type")
		{
		/*alert("123");
		alert(this.data.attrs.required);*/
		if(lang_id == 744)//English
		{//alert("eng ");
			var labelnew = document.getElementById("rn_" + this.instanceID + "_" + "Label");
			labelnew.innerHTML="Member Type"+"<span class='rn_Required'> *</span>";
			this.data.attrs.required=true;
		}
		else
		{
			this.input.set('value','');
			this.data.attrs.required=false;
		}
		}
		else if(this.data.js.name == "Incident.CustomFields.c.member_type_fre")
		{
		if(lang_id == 745)//French
		{
			var labelnew = document.getElementById("rn_" + this.instanceID + "_" + "Label");
			labelnew.innerHTML="Member Type"+"<span class='rn_Required'> *</span>";
			this.data.attrs.required=true;
		}
		else
		{
			this.input.set('value','');
			this.data.attrs.required=false;
		}	
		}
		else if(this.data.js.name == "Incident.CustomFields.c.member_type_spa")
		{
		if(lang_id == 746)//Spanish
		{
			var labelnew = document.getElementById("rn_" + this.instanceID + "_" + "Label");
			labelnew.innerHTML="Member Type"+"<span class='rn_Required'> *</span>";
			this.data.attrs.required=true;
		}
		else
		{
			this.input.set('value','');
			this.data.attrs.required=false;
		}	
		}
		
		
		
		
		
		
	},
	_displayBlock: function(displayBlock)
	{
		/*console.log(displayBlock);*/
		for (var i=0;i<displayBlock.length;i++)
		{
			if(document.getElementById(displayBlock[i]))
			{
				document.getElementById(displayBlock[i]).style.display = "block";
			}
		}
	},
	_resetAttrs: function()
	{		
			this.input.set('value','');
			this.data.attrs.required=false;
			document.getElementById("transfer_vc_coach_eng_yes").style.display = "none";
			
	}
	
});